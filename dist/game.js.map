{"version":3,"sources":["webpack:///webpack/bootstrap d6ac20e0b4b891a5d4a7","webpack:///./src/game.js","webpack:///./src/simple-gl/index.js","webpack:///./src/simple-gl/rect.v.glsl","webpack:///./src/simple-gl/rect.f.glsl","webpack:///./src/tiles.js","webpack:///./src/consts.js","webpack:///./src/texts.js","webpack:///./src/dot-fonts/letters.js","webpack:///./src/dot-fonts/numbers.js","webpack:///./src/dot-fonts/symbols.js","webpack:///./src/dot-fonts/special.js","webpack:///./src/cover.js","webpack:///./src/animate.js","webpack:///./src/buttons.js","webpack:///./src/levels/tutorial-1.js","webpack:///./src/levels/tutorial-2.js","webpack:///./src/levels/tutorial-3.js","webpack:///./src/generator.js"],"names":["tileUtils","changeOrientation","isVertical","init","canvas","stage","root","getRootContainer","mainContainer","createContainer","coverContainer","coverUtils","onSelect","type","clear","append","levels","nextLevel","item","length","showCover","loadLevel","shift","info","levelNum","timeUsed","level","window","open","rectVs","require","rectFs","createVertexShader","gl","src","shaderLog","shader","createShader","VERTEX_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","Error","createFragmentShader","FRAGMENT_SHADER","createShaderProgram","vs","fs","shaderProgram","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","SimpleAttribBuffer","attribName","size","count","_gl","_size","_count","glBuf","_glBuf","createBuffer","buf","_buf","Float32Array","bindBuffer","ARRAY_BUFFER","bufferData","DYNAMIC_DRAW","attribLocation","getAttribLocation","enableVertexAttribArray","vertexAttribPointer","FLOAT","SimpleUniform","uniformName","_loc","getUniformLocation","x","y","z","w","uniform1f","uniform2f","uniform3f","uniform4f","SimpleGLObject","simpleGL","alpha","_bindings","Object","create","s","d","c","_blendMode","_triggerBinding","blendMode","blendColor","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","name","cb","push","detail","arr","forEach","func","call","pos","_handleEvent","SimpleRect","useProgram","uCanvasSize","_width","_height","_rectGL","aPoint","uColor","h","_simpleGL","r","g","b","a","relX","relY","relAlpha","_prepareObject","getFloat32Array","write","set","drawArrays","TRIANGLE_FAN","SimpleContainer","_children","i","child","unshift","before","index","indexOf","splice","node","_draw","SimpleGL","getContext","enable","BLEND","viewport","width","height","clearColor","clearDepth","_canvas","_rootContainer","_init","setAutoUpdate","status","_autoUpdate","checkUpdate","_scheduledChecking","requestAnimationFrame","update","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","args","userClickEnabled","userColor","map","steps","startTime","timeTobj","currentTutorialStep","tutorialSteps","levelEndCb","tilesContainer","TILE_AREA_MARGIN","bgContainer","fgContainer","animateContainer","tutorialContainer","metaContainer","colorHintContainer","levelInfoContainer","userColorSelectContainer","drawBackground","j","M_N_MAX","toPixelPos","tile","createRect","TILE_SIZE","color","bind","handleUserClick","initTileContainers","singleTileContainer","refreshTiles","num","rect","tileType","colorSelectButtons","colorHints","resetMetaContainer","showTitle","titleText","maxColor","TITLE_SIZE","TIME_SIZE","TITLE_COLOR_ARR","titleContainer","timeContainer","setInterval","timeDiff","Math","floor","Date","now","minuteStr","secondStr","String","slice","showMapInfo","str","mapInfoContainer","refreshColorSelectButtons","btn","drawColorHint","SIZE","INTERVAL","INITIAL_X","rowOffset","container","text","endX","drawUserColorSelect","SPACING","BORDER_SIZE","btns","acceptUserClick","findTileRectByColor","forEachChild","cloneRect","ret","checkColorToAdj","m","n","toM","toN","srcRect","srcPos","toPos","midPos","oldRect","remove","setAlpha","ANIMATION_LENGTH","eraseColor","checkLevelEnd","addColor","colorArr","from","to","parseLevelStr","mapStr","hasR","hasG","hasB","title","difficulty","seed","endLevel","clearInterval","TILE_MARGIN","tileBetween","signs","match","line","COLOR_R","COLOR_G","COLOR_B","transformColorStr","colorStr","parseInt","COLOR_R_ARR","COLOR_G_ARR","COLOR_B_ARR","COLOR_BG_ARR","COLOR_BTN_NORMAL_ARR","COLOR_BTN_ACTIVE_ARR","COLOR_BTN_FLASH_ARR","R","G","B","MAP_LETTER_NUM_MAP","p","dotsPositions","dotsInfo","prepareFonts","letter","dotStr","lines","split","left","right","infoArr","JSON","parse","lineContent","k","createTexts","dotsPosArr","dotSize","A","C","D","E","F","H","I","J","K","L","M","N","O","P","Q","S","T","U","V","W","X","Y","Z","selectCb","title1","title2","title3","title4","tutorialButton","tutorialText1","tutorialText2","endlessContainer","endlessButton","endlessText1","endlessText2","authorContainer","authorText","authorTextBg","animateObj","obj","fromX","fromY","fromAlpha","toX","toY","toAlpha","endTime","updateFunc","time","timeLeft","ratio","sqrt","FLASH_ANIMATION_LENGTH","createButton","margin","activateButton","deactivateButton","flashButton","buttonFlashing","curAlpha","flash","unflashButton","D_PER_LEVEL","D_COLOR_COUNT","D_STEP_BATCH","P_SYMMETRY_NONE","P_SYMMETRY_H","P_SYMMETRY_V","P_SYMMETRY_ROTATE","P_SYMMETRY_ALL","P_SYMMETRY_ALL_ROTATE","P_2_COLOR_D_MIN","P_3_COLOR_D_MIN","P_2_COLOR_D_INC","P_3_COLOR_D_INC","SYMMETRY_NONE","SYMMETRY_H","SYMMETRY_V","SYMMETRY_ROTATE","SYMMETRY_ALL","SYMMETRY_ALL_ROTATE","levelToDifficulty","endless","random","curSeed","curRandMul","getRandom","max","prevRandMul","colorMap","opCountMap","symmetryRand","symmetryType","colorKey","colorRand","colors","colorType","pColor2","pColor3","currentD","nextStep","stepColor","stepM","stepN","signMap","weightMap","stepCount","setSignMap","stepD","console","levelObj"],"mappings":"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","file":"game.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d6ac20e0b4b891a5d4a7","import { SimpleGL } from './simple-gl'\r\nimport tiles from './tiles'\r\nimport cover from './cover'\r\nimport TUTORIAL_1 from './levels/tutorial-1'\r\nimport TUTORIAL_2 from './levels/tutorial-2'\r\nimport TUTORIAL_3 from './levels/tutorial-3'\r\nimport { endless } from './generator'\r\n\r\nlet tileUtils = null\r\n\r\n/* eslint-disable no-use-before-define */\r\n\r\nexport const changeOrientation = (isVertical) => {\r\n  tileUtils.changeOrientation(isVertical)\r\n}\r\n\r\nexport const init = (canvas, isVertical) => {\r\n  const stage = new SimpleGL(canvas)\r\n  const root = stage.getRootContainer()\r\n\r\n  // init main container for tiles\r\n  const mainContainer = stage.createContainer()\r\n  tileUtils = tiles(stage, mainContainer)\r\n  if (isVertical) tileUtils.changeOrientation(isVertical)\r\n\r\n  // init cover\r\n  const coverContainer = stage.createContainer()\r\n  const coverUtils = cover(stage, coverContainer)\r\n  if (isVertical) coverUtils.changeOrientation(isVertical)\r\n  coverUtils.onSelect((type) => {\r\n    if (type === 'tutorial') {\r\n      root.clear().append(mainContainer)\r\n      const levels = [TUTORIAL_1, TUTORIAL_2, TUTORIAL_3]\r\n      const nextLevel = (item) => {\r\n        if (!levels.length) return showCover()\r\n        tileUtils.loadLevel(levels.shift(), (info) => {\r\n          nextLevel()\r\n        })\r\n      }\r\n      nextLevel()\r\n    } else if (type === 'endless') {\r\n      let levelNum = 0\r\n      root.clear().append(mainContainer)\r\n      const nextLevel = ({timeUsed}) => {\r\n        tileUtils.loadLevel(endless({\r\n          level: ++levelNum,\r\n          timeUsed\r\n        }), nextLevel)\r\n      }\r\n      nextLevel({\r\n        timeUsed: 0\r\n      })\r\n    } else {\r\n      window.open('https://github.com/LastLeaf/tricolors')\r\n    }\r\n  })\r\n\r\n  const showCover = () => {\r\n    root.clear().append(coverContainer)\r\n  }\r\n  showCover()\r\n\r\n  return stage\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/game.js","const rectVs = require('./rect.v.glsl')\r\nconst rectFs = require('./rect.f.glsl')\r\n\r\nconst createVertexShader = (gl, src) => {\r\n  let shaderLog = ''\r\n  const shader = gl.createShader(gl.VERTEX_SHADER)\r\n  gl.shaderSource(shader, src)\r\n  gl.compileShader(shader)\r\n  if(!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\r\n    shaderLog = gl.getShaderInfoLog(shader)\r\n    gl.deleteShader(shader)\r\n    throw new Error('Failed initializing WebGL vertex shader: ' + shaderLog)\r\n  }\r\n  return shader\r\n}\r\n\r\nconst createFragmentShader = (gl, src) => {\r\n  let shaderLog = ''\r\n  const shader = gl.createShader(gl.FRAGMENT_SHADER)\r\n  gl.shaderSource(shader, src)\r\n  gl.compileShader(shader)\r\n  if(!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\r\n    shaderLog = gl.getShaderInfoLog(shader)\r\n    gl.deleteShader(shader)\r\n    throw new Error('Failed initializing WebGL fragment shader: ' + shaderLog)\r\n  }\r\n  return shader\r\n}\r\n\r\nconst createShaderProgram = (gl, vs, fs) => {\r\n  var shaderProgram = gl.createProgram()\r\n  gl.attachShader(shaderProgram, vs)\r\n  gl.attachShader(shaderProgram, fs)\r\n  gl.linkProgram(shaderProgram)\r\n  if(!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\r\n    throw new Error('Failed initializing WebGL shader program.')\r\n  }\r\n  return shaderProgram\r\n}\r\n\r\nclass SimpleAttribBuffer {\r\n  constructor(gl, shaderProgram, attribName, size, count) {\r\n    this._gl = gl\r\n    this._size = size\r\n    this._count = count\r\n    const glBuf = this._glBuf = gl.createBuffer()\r\n    const buf = this._buf = new window.Float32Array(size * count)\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, glBuf)\r\n    gl.bufferData(gl.ARRAY_BUFFER, buf, gl.DYNAMIC_DRAW)\r\n    const attribLocation = gl.getAttribLocation(shaderProgram, attribName)\r\n    gl.enableVertexAttribArray(attribLocation)\r\n    gl.vertexAttribPointer(attribLocation, size, gl.FLOAT, false, 0, 0)\r\n  }\r\n  getFloat32Array() {\r\n    return this._buf\r\n  }\r\n  write() {\r\n    const gl = this._gl\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, this._glBuf)\r\n    gl.bufferData(gl.ARRAY_BUFFER, this._buf, gl.DYNAMIC_DRAW)\r\n  }\r\n}\r\n\r\nclass SimpleUniform {\r\n  constructor(gl, shaderProgram, uniformName, size) {\r\n    this._gl = gl\r\n    this._size = size\r\n    this._loc = gl.getUniformLocation(shaderProgram, uniformName)\r\n  }\r\n  set(x, y, z, w) {\r\n    const gl = this._gl\r\n    const size = this._size\r\n    if (size === 1) {\r\n      gl.uniform1f(this._loc, x)\r\n    } else if (size === 2) {\r\n      gl.uniform2f(this._loc, x, y)\r\n    } else if (size === 3) {\r\n      gl.uniform3f(this._loc, x, y, z)\r\n    } else {\r\n      gl.uniform4f(this._loc, x, y, z, w)\r\n    }\r\n  }\r\n}\r\n\r\nclass SimpleGLObject {\r\n  constructor(simpleGL) {\r\n    this._gl = simpleGL._gl\r\n    this.alpha = 1\r\n    this._bindings = Object.create(null)\r\n  }\r\n  setAlpha(alpha) {\r\n    this.alpha = alpha\r\n    return this\r\n  }\r\n  blendMode(s, d, c) {\r\n    const gl = this._gl\r\n    this._blendMode = [gl[s], gl[d], c]\r\n    return this\r\n  }\r\n  _prepareObject() {\r\n    const gl = this._gl\r\n    this._triggerBinding('draw')\r\n    const blendMode = this._blendMode\r\n    if (blendMode) {\r\n      if(blendMode[2]) gl.blendColor(blendMode[2][0], blendMode[2][1], blendMode[2][2], blendMode[2][3])\r\n      gl.blendFunc(blendMode[0], blendMode[1])\r\n    } else {\r\n      gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA)\r\n    }\r\n  }\r\n  bind(name, cb) {\r\n    if (!this._bindings[name]) {\r\n      this._bindings[name] = [cb]\r\n    } else {\r\n      this._bindings[name].push(cb)\r\n    }\r\n    return this\r\n  }\r\n  _triggerBinding(name, detail) {\r\n    const arr = this._bindings[name]\r\n    if (!arr) return\r\n    arr.forEach((func) => {\r\n      func.call(this, detail)\r\n    })\r\n  }\r\n  emit(pos, name, detail) {\r\n    this._handleEvent(pos, name, detail)\r\n  }\r\n  // eslint-disable-next-line class-methods-use-this\r\n  _handleEvent(pos, name, detail) {\r\n    throw new Error('Not implemented')\r\n  }\r\n}\r\n\r\nclass SimpleRect extends SimpleGLObject {\r\n  static _init(simpleGL) {\r\n    const gl = simpleGL._gl\r\n    const vs = createVertexShader(gl, rectVs)\r\n    const fs = createFragmentShader(gl, rectFs)\r\n    const shaderProgram = createShaderProgram(gl, vs, fs)\r\n    gl.useProgram(shaderProgram)\r\n    const uCanvasSize = gl.getUniformLocation(shaderProgram, 'uCanvasSize')\r\n    gl.uniform2f(uCanvasSize, simpleGL._width, simpleGL._height)\r\n    simpleGL._rectGL = {\r\n      shaderProgram,\r\n      aPoint: new SimpleAttribBuffer(gl, shaderProgram, 'aPoint', 2, 4),\r\n      uColor: new SimpleUniform(gl, shaderProgram, 'uColor', 4),\r\n    }\r\n  }\r\n  constructor(simpleGL, x = 0, y = 0, w = 0, h = 0) {\r\n    super(simpleGL)\r\n    this._simpleGL = simpleGL\r\n    this._gl = simpleGL._gl\r\n    this.x = x\r\n    this.y = y\r\n    this.w = w\r\n    this.h = h\r\n    this.r = 0\r\n    this.g = 0\r\n    this.b = 0\r\n    this.a = 0\r\n  }\r\n  color(r, g, b, a) {\r\n    this.r = r\r\n    this.g = g\r\n    this.b = b\r\n    this.a = a\r\n    return this\r\n  }\r\n  pos(x, y) {\r\n    this.x = x\r\n    this.y = y\r\n    return this\r\n  }\r\n  size(w, h) {\r\n    this.w = w\r\n    this.h = h\r\n    return this\r\n  }\r\n  _draw(relX, relY, relAlpha) {\r\n    const gl = this._gl\r\n    const info = this._simpleGL._rectGL\r\n    gl.useProgram(info.shaderProgram)\r\n    this._prepareObject()\r\n    const aPoint = info.aPoint.getFloat32Array()\r\n    const {x, y, w, h, r, g, b, a} = this\r\n    aPoint[0] = relX + x\r\n    aPoint[1] = relY + y\r\n    aPoint[2] = relX + x\r\n    aPoint[3] = relY + y + h\r\n    aPoint[4] = relX + x + w\r\n    aPoint[5] = relY + y + h\r\n    aPoint[6] = relX + x + w\r\n    aPoint[7] = relY + y\r\n    info.aPoint.write()\r\n    info.uColor.set(r, g, b, a * this.alpha * relAlpha)\r\n    gl.drawArrays(gl.TRIANGLE_FAN, 0, 4)\r\n  }\r\n  _handleEvent(pos, name, detail) {\r\n    if (pos.x < this.x) return\r\n    if (pos.x >= this.x + this.w) return\r\n    if (pos.y < this.y) return\r\n    if (pos.y >= this.y + this.h) return\r\n    this._triggerBinding(name, detail)\r\n  }\r\n}\r\n\r\nclass SimpleContainer extends SimpleGLObject {\r\n  constructor(simpleGL, x = 0, y = 0) {\r\n    super(simpleGL)\r\n    this._simpleGL = simpleGL\r\n    this._gl = simpleGL._gl\r\n    this.x = x\r\n    this.y = y\r\n    this._children = []\r\n  }\r\n  pos(x, y) {\r\n    this.x = x\r\n    this.y = y\r\n    return this\r\n  }\r\n  blendMode(s, d, c) {\r\n    this._children.forEach((item) => {\r\n      item.blendMode(s, d, c)\r\n    })\r\n    return this\r\n  }\r\n  forEachChild(func) {\r\n    return this._children.forEach(func)\r\n  }\r\n  index(i) {\r\n    return this._children[i]\r\n  }\r\n  append(child) {\r\n    this._children.push(child)\r\n    return this\r\n  }\r\n  prepend(child) {\r\n    this._children.unshift(child)\r\n    return this\r\n  }\r\n  insert(child, before) {\r\n    const index = this._children.indexOf(before)\r\n    if (index >= 0) this._children.splice(index, 0, child)\r\n    return this\r\n  }\r\n  remove(child) {\r\n    const index = this._children.indexOf(child)\r\n    if (index >= 0) this._children.splice(index, 1)\r\n    return this\r\n  }\r\n  clear() {\r\n    while(this._children.length) this._children.shift()\r\n    return this\r\n  }\r\n  _draw(relX, relY, relAlpha) {\r\n    this._prepareObject()\r\n    this._children.forEach((node) => {\r\n      node._draw(relX + this.x, relY + this.y, this.alpha * relAlpha)\r\n    })\r\n  }\r\n  _handleEvent(pos, name, detail) {\r\n    this._children.forEach((node) => {\r\n      node._handleEvent({\r\n        x: pos.x - this.x,\r\n        y: pos.y - this.y\r\n      }, name, detail)\r\n    })\r\n  }\r\n}\r\n\r\nexport class SimpleGL {\r\n  constructor(canvas) {\r\n    const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl')\r\n    gl.enable(gl.BLEND)\r\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA)\r\n    gl.viewport(0, 0, canvas.width, canvas.height)\r\n    gl.clearColor(0.0, 0.0, 0.0, 0.0)\r\n    gl.clearDepth(1)\r\n    this._canvas = canvas\r\n    this._gl = gl\r\n    this._width = canvas.width\r\n    this._height = canvas.height\r\n    this._rootContainer = new SimpleContainer(this, 0, 0)\r\n    SimpleRect._init(this)\r\n    this.setAutoUpdate(true)\r\n  }\r\n  setAutoUpdate(status) {\r\n    this._autoUpdate = status\r\n    if (status) {\r\n      const checkUpdate = () => {\r\n        this._scheduledChecking = false\r\n        if (!this._autoUpdate) return\r\n        requestAnimationFrame(checkUpdate)\r\n        this._scheduledChecking = true\r\n        this.update()\r\n      }\r\n      if (!this._scheduledChecking) {\r\n        requestAnimationFrame(checkUpdate)\r\n        this._scheduledChecking = true\r\n      }\r\n    }\r\n  }\r\n  update() {\r\n    const gl = this._gl\r\n    gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT)\r\n    this._rootContainer._draw(0, 0, 1)\r\n  }\r\n  getRootContainer() {\r\n    return this._rootContainer\r\n  }\r\n  createContainer(...args) {\r\n    return new SimpleContainer(this, ...args)\r\n  }\r\n  createRect(...args) {\r\n    return new SimpleRect(this, ...args)\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/simple-gl/index.js","module.exports = \"attribute vec2 aPoint;\\r\\nuniform vec2 uCanvasSize;\\r\\n\\r\\nvoid main(void) {\\r\\n  gl_Position = vec4(aPoint * mat2( 2.0/uCanvasSize.x,0, 0,-2.0/uCanvasSize.y ) + vec2(-1, 1), 0, 1);\\r\\n}\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/simple-gl/rect.v.glsl\n// module id = 2\n// module chunks = 0","module.exports = \"uniform highp vec4 uColor;\\r\\n\\r\\nvoid main(void) {\\r\\n  gl_FragColor = uColor;\\r\\n}\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/simple-gl/rect.f.glsl\n// module id = 3\n// module chunks = 0","import {\r\n  COLOR_R_ARR,\r\n  COLOR_G_ARR,\r\n  COLOR_B_ARR,\r\n  COLOR_BG_ARR,\r\n  R,\r\n  G,\r\n  B,\r\n  MAP_LETTER_NUM_MAP,\r\n} from './consts'\r\nimport {\r\n  createButton,\r\n  activateButton,\r\n  deactivateButton,\r\n  flashButton,\r\n  unflashButton,\r\n} from './buttons'\r\nimport { createTexts } from './texts'\r\nimport { animateObj } from './animate'\r\n\r\nconst M_N_MAX = 5\r\nconst TILE_SIZE = 150\r\nconst TILE_MARGIN = 50\r\nconst TILE_AREA_MARGIN = (1080 - TILE_SIZE * M_N_MAX - TILE_MARGIN * (M_N_MAX - 1)) / 2\r\nconst ANIMATION_LENGTH = 200\r\n\r\nconst toPixelPos = (m, n, alpha) => {\r\n  const tileBetween = TILE_SIZE + TILE_MARGIN\r\n  return {\r\n    x: m * tileBetween,\r\n    y: n * tileBetween,\r\n    alpha: alpha\r\n  }\r\n}\r\n\r\nconst parseLevelStr = (str) => {\r\n  const signs = str.match(/[-rgbycpw]/g)\r\n  const map = []\r\n  for(let j = 0; j < M_N_MAX; j++) {\r\n    const line = []\r\n    for(let i = 0; i < M_N_MAX; i++) {\r\n      line.push(MAP_LETTER_NUM_MAP[signs.shift()])\r\n    }\r\n    map.push(line)\r\n  }\r\n  return map\r\n}\r\n\r\n/* eslint-disable no-use-before-define */\r\n\r\nexport default function(stage, mainContainer) {\r\n  // game states\r\n  let userClickEnabled = false\r\n  let userColor = R | G | B\r\n  let map = null\r\n  let steps = []\r\n  let startTime = 0\r\n  let timeTobj = null\r\n  let currentTutorialStep = null\r\n  let tutorialSteps = null\r\n  let levelEndCb = null\r\n\r\n  // base containers\r\n  const tilesContainer = stage.createContainer()\r\n  mainContainer.append(tilesContainer)\r\n  tilesContainer.pos(1920 - 1080 + TILE_AREA_MARGIN, TILE_AREA_MARGIN)\r\n  const bgContainer = stage.createContainer()\r\n  const fgContainer = stage.createContainer()\r\n  const animateContainer = stage.createContainer()\r\n  const tutorialContainer = stage.createContainer()\r\n  tilesContainer.append(tutorialContainer).append(bgContainer).append(fgContainer).append(animateContainer)\r\n\r\n  // meta containers\r\n  const metaContainer = stage.createContainer()\r\n  mainContainer.append(metaContainer)\r\n  metaContainer.pos(TILE_AREA_MARGIN, TILE_AREA_MARGIN)\r\n  const colorHintContainer = stage.createContainer(0, 1080 - TILE_AREA_MARGIN * 2 - 200)\r\n  const levelInfoContainer = stage.createContainer(0,40)\r\n  const userColorSelectContainer = stage.createContainer(0, 1080 - TILE_AREA_MARGIN * 2)\r\n  metaContainer.append(colorHintContainer).append(levelInfoContainer).append(userColorSelectContainer)\r\n\r\n  // add background tiles\r\n  const drawBackground = () => {\r\n    for(let j = 0; j < M_N_MAX; j++) {\r\n      // eslint-disable-next-line no-loop-func\r\n      for(let i = 0; i < M_N_MAX; i++) ((i, j) => {\r\n        const {x, y} = toPixelPos(i, j)\r\n        const tile = stage.createRect(x, y, TILE_SIZE, TILE_SIZE).color(...COLOR_BG_ARR)\r\n        bgContainer.append(tile)\r\n        tile.bind('click', () => {\r\n          handleUserClick(i, j)\r\n        })\r\n      })(i, j)\r\n    }\r\n  }\r\n  drawBackground()\r\n\r\n  // draw foreground tiles\r\n  const initTileContainers = () => {\r\n    for(let j = 0; j < M_N_MAX; j++) {\r\n      for(let i = 0; i < M_N_MAX; i++) {\r\n        const {x, y} = toPixelPos(i, j)\r\n        const singleTileContainer = stage.createContainer(x, y)\r\n        fgContainer.append(singleTileContainer)\r\n      }\r\n    }\r\n  }\r\n  initTileContainers()\r\n  const refreshTiles = () => {\r\n    for(let j = 0; j < M_N_MAX; j++) {\r\n      for(let i = 0; i < M_N_MAX; i++) {\r\n        const num = map[j][i]\r\n        const singleTileContainer = fgContainer.index(j * M_N_MAX + i)\r\n        singleTileContainer.clear()\r\n        if (num & R) {\r\n          const rect = stage.createRect(0, 0, TILE_SIZE, TILE_SIZE).color(...COLOR_R_ARR).blendMode('SRC_ALPHA', 'ONE')\r\n          rect.tileType = R\r\n          singleTileContainer.append(rect)\r\n        }\r\n        if (num & G) {\r\n          const rect = stage.createRect(0, 0, TILE_SIZE, TILE_SIZE).color(...COLOR_G_ARR).blendMode('SRC_ALPHA', 'ONE')\r\n          rect.tileType = G\r\n          singleTileContainer.append(rect)\r\n        }\r\n        if (num & B) {\r\n          const rect = stage.createRect(0, 0, TILE_SIZE, TILE_SIZE).color(...COLOR_B_ARR).blendMode('SRC_ALPHA', 'ONE')\r\n          rect.tileType = B\r\n          singleTileContainer.append(rect)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // show user color status\r\n  let colorSelectButtons = []\r\n  let colorHints = {}\r\n  const resetMetaContainer = () => {\r\n    colorSelectButtons = []\r\n    colorHintContainer.clear()\r\n    levelInfoContainer.clear()\r\n    userColorSelectContainer.clear()\r\n  }\r\n  const showTitle = (titleText, maxColor) => {\r\n    const TITLE_SIZE = 100\r\n    const TIME_SIZE = 40\r\n    const TITLE_COLOR_ARR = [0.5, 0.5, 0.5, 1]\r\n    const titleContainer = createTexts(stage, titleText, TITLE_SIZE, TITLE_COLOR_ARR)\r\n    const timeContainer = stage.createContainer(0, TITLE_SIZE + 20)\r\n    levelInfoContainer.append(titleContainer).append(timeContainer)\r\n    timeTobj = setInterval(() => {\r\n      const timeDiff = Math.floor((Date.now() - startTime) / 1000)\r\n      const minuteStr = (timeDiff < 600 ? '0' : '') + Math.floor(timeDiff / 60)\r\n      const secondStr = ':' + String(timeDiff % 60 + 100).slice(1)\r\n      timeContainer.clear()\r\n      timeContainer.append(createTexts(stage, minuteStr + secondStr, TIME_SIZE, TITLE_COLOR_ARR))\r\n    }, 1000)\r\n  }\r\n  const showMapInfo = (str) => {\r\n    const mapInfoContainer = createTexts(stage, str, 30, [0.3, 0.3, 0.3, 1]).pos(0, -60)\r\n    levelInfoContainer.append(mapInfoContainer)\r\n  }\r\n  const refreshColorSelectButtons = () => {\r\n    colorSelectButtons.forEach((btn) => {\r\n      if (userColor === btn.userColor) activateButton(btn)\r\n      else deactivateButton(btn)\r\n    })\r\n    colorHintContainer.clear()\r\n    if (colorHints[userColor]) colorHintContainer.append(colorHints[userColor])\r\n  }\r\n  const drawColorHint = (maxColor) => {\r\n    const SIZE = 60\r\n    const INTERVAL = 2.25 * 60\r\n    const INITIAL_X = 22.5\r\n    let y = 0\r\n    ;[R|G, R|B, G|B, R|G|B].forEach((c) => {\r\n      if (maxColor & c) {\r\n        const rowOffset = -10\r\n        const container = stage.createContainer(rowOffset, 0)\r\n        const text = createTexts(stage, c === (R|G|B) ? '  +  +  =' : '  +  =', SIZE, [0.5, 0.5, 0.5, 1])\r\n        container.append(text.pos(0, y))\r\n        let x = INITIAL_X\r\n        let endX = INITIAL_X + INTERVAL * (c === (R|G|B) ? 3 : 2)\r\n        if (c & R) {\r\n          container.append(stage.createRect(x, y, SIZE, SIZE).color(...COLOR_R_ARR).blendMode('SRC_ALPHA', 'ONE'))\r\n          container.append(stage.createRect(endX, y, SIZE, SIZE).color(...COLOR_R_ARR).blendMode('SRC_ALPHA', 'ONE'))\r\n          x += INTERVAL\r\n        }\r\n        if (c & G) {\r\n          container.append(stage.createRect(x, y, SIZE, SIZE).color(...COLOR_G_ARR).blendMode('SRC_ALPHA', 'ONE'))\r\n          container.append(stage.createRect(endX, y, SIZE, SIZE).color(...COLOR_G_ARR).blendMode('SRC_ALPHA', 'ONE'))\r\n          x += INTERVAL\r\n        }\r\n        if (c & B) {\r\n          container.append(stage.createRect(x, y, SIZE, SIZE).color(...COLOR_B_ARR).blendMode('SRC_ALPHA', 'ONE'))\r\n          container.append(stage.createRect(endX, y, SIZE, SIZE).color(...COLOR_B_ARR).blendMode('SRC_ALPHA', 'ONE'))\r\n          x += INTERVAL\r\n        }\r\n        colorHints[c] = container\r\n      }\r\n    })\r\n  }\r\n  const drawUserColorSelect = (maxColor) => {\r\n    const SPACING = 30\r\n    const BORDER_SIZE = 10\r\n    const SIZE = 60\r\n    let x = 0\r\n    let y = -BORDER_SIZE * 2 - SIZE\r\n    const btns = colorSelectButtons = []\r\n    // eslint-disable-next-line no-loop-func\r\n    ;[R, G, B, R|G, R|B, G|B, R|G|B].forEach((c, index) => {\r\n      if ((maxColor & c) === c) {\r\n        const btn = createButton(stage, SIZE, SIZE, BORDER_SIZE, () => {\r\n          if (currentTutorialStep && (currentTutorialStep[0] !== -1 || currentTutorialStep[1] !== index)) return\r\n          userColor = c\r\n          refreshColorSelectButtons()\r\n          acceptUserClick()\r\n        }).pos(x + BORDER_SIZE, y + BORDER_SIZE)\r\n        btn.userColor = c\r\n        btns.push(btn)\r\n        userColorSelectContainer.append(btn)\r\n        if (c & R) userColorSelectContainer.append(stage.createRect(x + BORDER_SIZE, y + BORDER_SIZE, SIZE, SIZE).color(...COLOR_R_ARR).blendMode('SRC_ALPHA', 'ONE'))\r\n        if (c & G) userColorSelectContainer.append(stage.createRect(x + BORDER_SIZE, y + BORDER_SIZE, SIZE, SIZE).color(...COLOR_G_ARR).blendMode('SRC_ALPHA', 'ONE'))\r\n        if (c & B) userColorSelectContainer.append(stage.createRect(x + BORDER_SIZE, y + BORDER_SIZE, SIZE, SIZE).color(...COLOR_B_ARR).blendMode('SRC_ALPHA', 'ONE'))\r\n        x += BORDER_SIZE * 2 + SIZE + SPACING\r\n      }\r\n    })\r\n  }\r\n\r\n  // controllers\r\n  const findTileRectByColor = (singleTileContainer, color) => {\r\n    let rect = null\r\n    singleTileContainer.forEachChild((item) => {\r\n      if (item.tileType === color) {\r\n        rect = item\r\n        return false\r\n      }\r\n    })\r\n    return rect\r\n  }\r\n  const cloneRect = (rect) => {\r\n    const ret = stage.createRect(rect.x, rect.y, rect.w, rect.h).color(rect.r, rect.g, rect.b, rect.a).blendMode('SRC_ALPHA', 'ONE')\r\n    ret.tileType = rect.tileType\r\n    return ret\r\n  }\r\n  const checkColorToAdj = (m, n, toM, toN, color, srcRect) => {\r\n    if (toM < 0 || toM >= M_N_MAX || toN < 0 || toN >= M_N_MAX) return\r\n    // prepare rect\r\n    const rect = cloneRect(srcRect)\r\n    const srcPos = toPixelPos(m, n, 1)\r\n    const toPos = toPixelPos(toM, toN, 1)\r\n    const midPos = {\r\n      x: (srcPos.x + toPos.x) / 2,\r\n      y: (srcPos.y + toPos.y) / 2,\r\n      alpha: 0\r\n    }\r\n    animateContainer.append(rect)\r\n    const num = map[toN][toM]\r\n    map[toN][toM] ^= color\r\n    if (num & color) {\r\n      // erase\r\n      const singleTileContainer = fgContainer.index(toN * M_N_MAX + toM)\r\n      const oldRect = findTileRectByColor(singleTileContainer, color)\r\n      singleTileContainer.remove(oldRect)\r\n      rect.pos(toPos.x, toPos.y).setAlpha(1)\r\n      animateObj(rect, midPos, ANIMATION_LENGTH)\r\n    } else {\r\n      // add\r\n      rect.pos(midPos.x, midPos.y).setAlpha(0)\r\n      animateObj(rect, toPos, ANIMATION_LENGTH)\r\n    }\r\n  }\r\n  const eraseColor = (m, n, color) => {\r\n    userClickEnabled = false\r\n    map[n][m] ^= color\r\n    // find rect\r\n    const singleTileContainer = fgContainer.index(n * M_N_MAX + m)\r\n    const rect = findTileRectByColor(singleTileContainer, color)\r\n    // handling adjs\r\n    checkColorToAdj(m, n, m - 1, n, color, rect)\r\n    checkColorToAdj(m, n, m + 1, n, color, rect)\r\n    checkColorToAdj(m, n, m, n - 1, color, rect)\r\n    checkColorToAdj(m, n, m, n + 1, color, rect)\r\n    // animate self\r\n    const toPos = {\r\n      x: 0,\r\n      y: 0,\r\n      alpha: 0,\r\n    }\r\n    animateObj(rect, toPos, ANIMATION_LENGTH, () => {\r\n      requestAnimationFrame(() => {\r\n        animateContainer.clear()\r\n        refreshTiles()\r\n        acceptUserClick()\r\n        if (checkLevelEnd()) return\r\n      })\r\n    })\r\n  }\r\n  const addColor = (m, n, color) => {\r\n    userClickEnabled = false\r\n    map[n][m] ^= color\r\n    // create rect\r\n    const singleTileContainer = fgContainer.index(n * M_N_MAX + m)\r\n    const colorArr = {\r\n      [R]: COLOR_R_ARR,\r\n      [G]: COLOR_G_ARR,\r\n      [B]: COLOR_B_ARR,\r\n    }[color]\r\n    const rect = stage.createRect(0, 0, TILE_SIZE, TILE_SIZE).color(...colorArr).blendMode('SRC_ALPHA', 'ONE')\r\n    rect.setAlpha(0)\r\n    singleTileContainer.append(rect)\r\n    // handling adjs\r\n    checkColorToAdj(m, n, m - 1, n, color, rect)\r\n    checkColorToAdj(m, n, m + 1, n, color, rect)\r\n    checkColorToAdj(m, n, m, n - 1, color, rect)\r\n    checkColorToAdj(m, n, m, n + 1, color, rect)\r\n    // animate self\r\n    const toPos = {\r\n      x: 0,\r\n      y: 0,\r\n      alpha: 1,\r\n    }\r\n    animateObj(rect, toPos, ANIMATION_LENGTH, () => {\r\n      requestAnimationFrame(() => {\r\n        animateContainer.clear()\r\n        refreshTiles()\r\n        acceptUserClick()\r\n        if (checkLevelEnd()) return\r\n      })\r\n    })\r\n  }\r\n\r\n  // user click handler\r\n  const handleUserClick = (m, n) => {\r\n    if (!userClickEnabled) return\r\n    if (currentTutorialStep && (currentTutorialStep[0] !== m || currentTutorialStep[1] !== n)) return\r\n    const num = map[n][m]\r\n    steps.push({\r\n      m,\r\n      n,\r\n      from: num,\r\n      to: num ? 0 : userColor\r\n    })\r\n    if (num) {\r\n      userColor = num\r\n      refreshColorSelectButtons()\r\n      if (num & R) eraseColor(m, n, R)\r\n      if (num & G) eraseColor(m, n, G)\r\n      if (num & B) eraseColor(m, n, B)\r\n    } else {\r\n      if (userColor & R) addColor(m, n, R)\r\n      if (userColor & G) addColor(m, n, G)\r\n      if (userColor & B) addColor(m, n, B)\r\n    }\r\n  }\r\n  const acceptUserClick = () => {\r\n    userClickEnabled = true\r\n    if (currentTutorialStep) {\r\n      if (currentTutorialStep[0] === -1) {\r\n        const btn = colorSelectButtons[currentTutorialStep[1]]\r\n        unflashButton(btn)\r\n      } else {\r\n        tutorialContainer.clear()\r\n      }\r\n    }\r\n    currentTutorialStep = tutorialSteps.shift()\r\n    if (currentTutorialStep) {\r\n      if (currentTutorialStep[0] === -1) {\r\n        const btn = colorSelectButtons[currentTutorialStep[1]]\r\n        flashButton(btn)\r\n      } else {\r\n        const pos = toPixelPos(currentTutorialStep[0], currentTutorialStep[1])\r\n        const btn = createButton(stage, TILE_SIZE, TILE_SIZE, 20, () => {\r\n          unflashButton(btn)\r\n          activateButton(btn)\r\n        }).pos(pos.x, pos.y)\r\n        tutorialContainer.append(btn)\r\n        flashButton(btn)\r\n      }\r\n    }\r\n  }\r\n\r\n  // load map and start\r\n  const loadLevel = (level, cb) => {\r\n    // load level data\r\n    levelEndCb = cb\r\n    tutorialSteps = level.tutorialSteps || []\r\n    currentTutorialStep = null\r\n    map = level.map || parseLevelStr(level.mapStr)\r\n    // reset ui\r\n    resetMetaContainer()\r\n    refreshTiles()\r\n    // stat used colors\r\n    let hasR = false\r\n    let hasG = false\r\n    let hasB = false\r\n    for(let j = 0; j < M_N_MAX; j++) {\r\n      for(let i = 0; i < M_N_MAX; i++) {\r\n        const num = map[j][i]\r\n        if (num & R) hasR = true\r\n        if (num & G) hasG = true\r\n        if (num & B) hasB = true\r\n      }\r\n    }\r\n    const maxColor = (hasR ? R : 0) | (hasG ? G : 0) | (hasB ? B : 0)\r\n    userColor = MAP_LETTER_NUM_MAP[level.userColor] || maxColor\r\n    if (maxColor > B) {\r\n      drawColorHint(maxColor)\r\n      drawUserColorSelect(maxColor)\r\n      refreshColorSelectButtons()\r\n    }\r\n    // show title\r\n    startTime = Date.now() - (level.timeUsed || 0)\r\n    showTitle(level.title, maxColor)\r\n    if (level.difficulty) showMapInfo('SEED:' + level.seed + ' D:' + level.difficulty)\r\n    acceptUserClick()\r\n  }\r\n  const checkLevelEnd = () => {\r\n    let status = -1\r\n    for(let j = 0; j < M_N_MAX; j++) {\r\n      for(let i = 0; i < M_N_MAX; i++) {\r\n        const num = map[j][i]\r\n        if (status < 0) status = num\r\n        else if (status !== num) return false\r\n      }\r\n    }\r\n    endLevel()\r\n    return true\r\n  }\r\n  const endLevel = () => {\r\n    clearInterval(timeTobj)\r\n    levelEndCb({\r\n      timeUsed: Date.now() - startTime\r\n    })\r\n  }\r\n\r\n  return {\r\n    loadLevel,\r\n    changeOrientation: (isVertical) => {\r\n      if (isVertical) {\r\n        tilesContainer.pos(TILE_AREA_MARGIN, (1920 - 1080) / 2 + TILE_AREA_MARGIN)\r\n        colorHintContainer.pos(0, 1920 - TILE_AREA_MARGIN * 2 - 200)\r\n        userColorSelectContainer.pos(0, 1920 - TILE_AREA_MARGIN * 2)\r\n      }\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/tiles.js","const COLOR_R = '#e75885'\r\nconst COLOR_G = '#2f9134'\r\nconst COLOR_B = '#228eda'\r\n\r\nconst transformColorStr = (colorStr) => {\r\n  const r = parseInt(colorStr.slice(1, 3), 16) / 255\r\n  const g = parseInt(colorStr.slice(3, 5), 16) / 255\r\n  const b = parseInt(colorStr.slice(5, 7), 16) / 255\r\n  return [r, g, b, 0.7]\r\n}\r\nexport const COLOR_R_ARR = transformColorStr(COLOR_R)\r\nexport const COLOR_G_ARR = transformColorStr(COLOR_G)\r\nexport const COLOR_B_ARR = transformColorStr(COLOR_B)\r\nexport const COLOR_BG_ARR = [0.1, 0.1, 0.1, 1]\r\n\r\nexport const COLOR_BTN_NORMAL_ARR = [0.2, 0.2, 0.2, 1]\r\nexport const COLOR_BTN_ACTIVE_ARR = [0.6, 0.6, 0.6, 1]\r\nexport const COLOR_BTN_FLASH_ARR = [0.7, 0.7, 0.7, 1]\r\n\r\nexport const R = 1\r\nexport const G = 2\r\nexport const B = 4\r\n\r\nexport const MAP_LETTER_NUM_MAP = {\r\n  '-': 0,\r\n  r: R,\r\n  g: G,\r\n  b: B,\r\n  y: R | G,\r\n  c: G | B,\r\n  p: R | B,\r\n  w: R | G | B,\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/consts.js","import LETTERS from './dot-fonts/letters'\r\nimport NUMBERS from './dot-fonts/numbers'\r\nimport SYMBOLS from './dot-fonts/symbols'\r\nimport SPECIAL from './dot-fonts/special'\r\n\r\nconst dotsPositions = Object.create(null)\r\nconst dotsInfo = Object.create(null)\r\n\r\nconst prepareFonts = (letter, dotStr) => {\r\n  const lines = dotStr.split('\\n')\r\n  while(lines[0].indexOf('[') < 0) lines.shift()\r\n  const left = lines[0].indexOf('[')\r\n  const right = lines[0].indexOf(']') + 1\r\n  const infoArr = JSON.parse(lines[0].slice(left, right))\r\n  const info = {width: infoArr[0], height: infoArr[1]}\r\n  let n = 0\r\n  const arr = []\r\n  for(lines.shift(); lines.length; lines.shift(), n++) {\r\n    const lineContent = lines[0].slice(left, left + info.width)\r\n    for(let m = 0; m < lineContent.length; m++) {\r\n      if (lineContent[m] === '+') {\r\n        arr.push([m, n])\r\n      }\r\n    }\r\n  }\r\n  dotsPositions[letter] = arr\r\n  dotsInfo[letter] = info\r\n}\r\nfor(let k in LETTERS) prepareFonts(k, LETTERS[k])\r\nfor(let k in NUMBERS) prepareFonts(k, NUMBERS[k])\r\nfor(let k in SYMBOLS) prepareFonts(k, SYMBOLS[k])\r\nfor(let k in SPECIAL) prepareFonts(k, SPECIAL[k])\r\n\r\nexport const createTexts = (stage, str, size, color) => {\r\n  const container = stage.createContainer()\r\n  let x = 0\r\n  for(let i = 0; i < str.length; i++) {\r\n    const dotsPosArr = dotsPositions[str[i]]\r\n    const info = dotsInfo[str[i]]\r\n    const dotSize = size / info.height\r\n    // eslint-disable-next-line no-loop-func\r\n    dotsPosArr.forEach(([m, n]) => {\r\n      const rect = stage.createRect(m * dotSize + x, n * dotSize, dotSize, dotSize).color(...color)\r\n      container.append(rect)\r\n    })\r\n    x += dotSize * info.width\r\n  }\r\n  return container\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/texts.js","export default {\r\n  A: `\r\n    [6,8]\r\n       +\r\n      + +\r\n     +   +\r\n     +   +\r\n     +++++\r\n     +   +\r\n     +   +\r\n  `,\r\n  B: `\r\n    [6,8]\r\n     ++++\r\n     +   +\r\n     +   +\r\n     ++++\r\n     +   +\r\n     +   +\r\n     ++++\r\n  `,\r\n  C: `\r\n    [6,8]\r\n      +++\r\n     +   +\r\n     +\r\n     +\r\n     +\r\n     +   +\r\n      +++\r\n  `,\r\n  D: `\r\n    [6,8]\r\n     +++\r\n     +  +\r\n     +   +\r\n     +   +\r\n     +   +\r\n     +  +\r\n     +++\r\n  `,\r\n  E: `\r\n    [6,8]\r\n     +++++\r\n     +\r\n     +\r\n     ++++\r\n     +\r\n     +\r\n     +++++\r\n  `,\r\n  F: `\r\n    [6,8]\r\n     +++++\r\n     +\r\n     +\r\n     ++++\r\n     +\r\n     +\r\n     +\r\n  `,\r\n  G: `\r\n    [6,8]\r\n      +++\r\n     +   +\r\n     +\r\n     +  ++\r\n     +   +\r\n     +  ++\r\n      ++ +\r\n  `,\r\n\r\n  H: `\r\n    [6,8]\r\n     +   +\r\n     +   +\r\n     +   +\r\n     +++++\r\n     +   +\r\n     +   +\r\n     +   +\r\n  `,\r\n  I: `\r\n    [6,8]\r\n      +++\r\n       +\r\n       +\r\n       +\r\n       +\r\n       +\r\n      +++\r\n  `,\r\n  J: `\r\n    [6,8]\r\n      +++\r\n       +\r\n       +\r\n       +\r\n       +\r\n     + +\r\n      +\r\n  `,\r\n  K: `\r\n    [6,8]\r\n     +   +\r\n     +  +\r\n     + +\r\n     ++\r\n     + +\r\n     +  +\r\n     +   +\r\n  `,\r\n  L: `\r\n    [6,8]\r\n      +\r\n      +\r\n      +\r\n      +\r\n      +\r\n      +\r\n      ++++\r\n  `,\r\n  M: `\r\n    [6,8]\r\n     +   +\r\n     ++ ++\r\n     + + +\r\n     + + +\r\n     +   +\r\n     +   +\r\n     +   +\r\n  `,\r\n  N: `\r\n    [6,8]\r\n     +   +\r\n     ++  +\r\n     + + +\r\n     +  ++\r\n     +   +\r\n     +   +\r\n     +   +\r\n  `,\r\n\r\n  O: `\r\n    [6,8]\r\n      +++\r\n     +   +\r\n     +   +\r\n     +   +\r\n     +   +\r\n     +   +\r\n      +++\r\n  `,\r\n  P: `\r\n    [6,8]\r\n     +++\r\n     +  +\r\n     +   +\r\n     +  +\r\n     +++\r\n     +\r\n     +\r\n  `,\r\n  Q: `\r\n    [6,8]\r\n     +   +\r\n     ++  +\r\n     + + +\r\n     +  ++\r\n     +   +\r\n     +   +\r\n     +   +\r\n  `,\r\n  R: `\r\n    [6,8]\r\n     ++++\r\n     +   +\r\n     +  +\r\n     +++\r\n     +  +\r\n     +   +\r\n     +   +\r\n  `,\r\n  S: `\r\n    [6,8]\r\n      +++\r\n     +   +\r\n      +\r\n       +\r\n        +\r\n     +   +\r\n      +++\r\n  `,\r\n  T: `\r\n    [6,8]\r\n     +++++\r\n       +\r\n       +\r\n       +\r\n       +\r\n       +\r\n       +\r\n  `,\r\n\r\n  U: `\r\n    [6,8]\r\n     +   +\r\n     +   +\r\n     +   +\r\n     +   +\r\n     +   +\r\n     +  ++\r\n      ++ +\r\n  `,\r\n  V: `\r\n    [6,8]\r\n     +   +\r\n     +   +\r\n     +   +\r\n     +   +\r\n     +   +\r\n      + +\r\n       +\r\n  `,\r\n  W: `\r\n    [6,8]\r\n     +   +\r\n     +   +\r\n     +   +\r\n     + + +\r\n     + + +\r\n     + + +\r\n      + +\r\n  `,\r\n  X: `\r\n    [6,8]\r\n     +   +\r\n     +   +\r\n      + +\r\n       +\r\n      + +\r\n     +   +\r\n     +   +\r\n  `,\r\n  Y: `\r\n    [6,8]\r\n     +   +\r\n     +   +\r\n      + +\r\n       +\r\n       +\r\n       +\r\n       +\r\n  `,\r\n  Z: `\r\n    [6,8]\r\n     +++++\r\n         +\r\n      + +\r\n       +\r\n      + +\r\n     +\r\n     +++++\r\n  `,\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/dot-fonts/letters.js","export default {\r\n  0: `\r\n    [6,8]\r\n      +++\r\n     +   +\r\n     +  ++\r\n     + + +\r\n     ++  +\r\n     +   +\r\n      +++\r\n  `,\r\n  1: `\r\n    [6,8]\r\n       +\r\n      ++\r\n       +\r\n       +\r\n       +\r\n       +\r\n      +++\r\n  `,\r\n  2: `\r\n    [6,8]\r\n      +++\r\n     +   +\r\n        +\r\n       +\r\n      +\r\n     +\r\n     +++++\r\n  `,\r\n  3: `\r\n    [6,8]\r\n      +++\r\n     +   +\r\n         +\r\n       ++\r\n         +\r\n     +   +\r\n      +++\r\n  `,\r\n  4: `\r\n    [6,8]\r\n        +\r\n       ++\r\n      + +\r\n     +  +\r\n     +++++\r\n        +\r\n        +\r\n  `,\r\n  5: `\r\n    [6,8]\r\n     +++++\r\n     +\r\n     +\r\n      +++\r\n         +\r\n     +   +\r\n      +++\r\n  `,\r\n  6: `\r\n    [6,8]\r\n      +++\r\n     +   +\r\n     +\r\n     ++++\r\n     +   +\r\n     +   +\r\n      +++\r\n  `,\r\n  7: `\r\n    [6,8]\r\n     +++++\r\n         +\r\n        +\r\n       +\r\n      +\r\n      +\r\n      +\r\n  `,\r\n  8: `\r\n    [6,8]\r\n      +++\r\n     +   +\r\n     +   +\r\n      +++\r\n     +   +\r\n     +   +\r\n      +++\r\n  `,\r\n  9: `\r\n    [6,8]\r\n      +++\r\n     +   +\r\n     +   +\r\n      ++++\r\n         +\r\n     +   +\r\n      +++\r\n  `,\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/dot-fonts/numbers.js","export default {\r\n  ' ': `\r\n    [6,8]\r\n  `,\r\n  '-': `\r\n    [6,8]\r\n\r\n\r\n\r\n     +++++\r\n\r\n\r\n\r\n  `,\r\n  '=': `\r\n    [6,8]\r\n\r\n\r\n     +++++\r\n\r\n     +++++\r\n\r\n\r\n  `,\r\n  '+': `\r\n    [6,8]\r\n\r\n       +\r\n       +\r\n     +++++\r\n       +\r\n       +\r\n\r\n  `,\r\n  '.': `\r\n    [6,8]\r\n\r\n\r\n\r\n\r\n\r\n      ++\r\n      ++\r\n  `,\r\n  ':': `\r\n    [6,8]\r\n\r\n\r\n       +\r\n\r\n\r\n       +\r\n\r\n  `,\r\n  '#': `\r\n    [6,8]\r\n      + +\r\n      + +\r\n     +++++\r\n      + +\r\n     +++++\r\n      + +\r\n      + +\r\n  `,\r\n  '?': `\r\n    [6,8]\r\n      +++\r\n     +   +\r\n         +\r\n        +\r\n       +\r\n\r\n       +\r\n  `,\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/dot-fonts/symbols.js","export default {\r\n  '\\x01': `\r\n    [6,8]\r\n     ++\r\n     +++\r\n     ++++\r\n     +++++\r\n     ++++\r\n     +++\r\n     ++\r\n  `,\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/dot-fonts/special.js","import {\r\n  COLOR_R_ARR,\r\n  COLOR_G_ARR,\r\n  COLOR_B_ARR,\r\n} from './consts'\r\nimport {\r\n  createButton,\r\n} from './buttons'\r\nimport { createTexts } from './texts'\r\n\r\nexport default (stage, container) => {\r\n  let selectCb = null\r\n\r\n  const titleContainer = stage.createContainer().pos(555, 300)\r\n  const title1 = createTexts(stage, 'TRI', 120, COLOR_R_ARR).blendMode('SRC_ALPHA', 'ONE')\r\n  const title2 = createTexts(stage, 'TRI', 120, COLOR_B_ARR).blendMode('SRC_ALPHA', 'ONE')\r\n  const title3 = createTexts(stage, 'COLORS', 120, COLOR_G_ARR).pos(270, 0).blendMode('SRC_ALPHA', 'ONE')\r\n  const title4 = createTexts(stage, 'COLORS', 120, COLOR_B_ARR).pos(270, 0).blendMode('SRC_ALPHA', 'ONE')\r\n  titleContainer.append(title1).append(title2).append(title3).append(title4)\r\n  container.append(titleContainer)\r\n\r\n  const tutorialContainer = stage.createContainer().pos(760, 600)\r\n  const tutorialButton = createButton(stage, 100, 100, 20, () => {\r\n    selectCb('tutorial')\r\n  })\r\n  const tutorialText1 = createTexts(stage, '?', 80, COLOR_R_ARR).pos(15, 10).blendMode('SRC_ALPHA', 'ONE')\r\n  const tutorialText2 = createTexts(stage, '?', 80, COLOR_G_ARR).pos(15, 10).blendMode('SRC_ALPHA', 'ONE')\r\n  tutorialContainer.append(tutorialButton).append(tutorialText1).append(tutorialText2)\r\n  container.append(tutorialContainer)\r\n\r\n  const endlessContainer = stage.createContainer().pos(1060, 600)\r\n  const endlessButton = createButton(stage, 100, 100, 20, () => {\r\n    selectCb('endless')\r\n  })\r\n  const endlessText1 = createTexts(stage, '\\x01', 80, COLOR_R_ARR).pos(15, 10).blendMode('SRC_ALPHA', 'ONE')\r\n  const endlessText2 = createTexts(stage, '\\x01', 80, COLOR_G_ARR).pos(15, 10).blendMode('SRC_ALPHA', 'ONE')\r\n  endlessContainer.append(endlessButton).append(endlessText1).append(endlessText2)\r\n  container.append(endlessContainer)\r\n\r\n  const authorContainer = stage.createContainer().pos(840, 960)\r\n  const authorText = createTexts(stage, 'LASTLEAF', 40, [0.4, 0.4, 0.4, 1])\r\n  const authorTextBg = stage.createRect(0, 0, 240, 40).color(0, 0, 0, 0).bind('click', () => {\r\n    selectCb('')\r\n  })\r\n  authorContainer.append(authorTextBg).append(authorText)\r\n  container.append(authorContainer)\r\n\r\n  return {\r\n    changeOrientation: (isVertical) => {\r\n      if (isVertical) {\r\n        titleContainer.pos(135, 500)\r\n        tutorialContainer.pos(300, 1200)\r\n        endlessContainer.pos(680, 1200)\r\n        authorContainer.pos(420, 1800)\r\n      }\r\n    },\r\n    onSelect: (cb) => {\r\n      selectCb = cb\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/cover.js","export const animateObj = (obj, toPos, length, cb) => {\r\n  const fromX = obj.x\r\n  const fromY = obj.y\r\n  const fromAlpha = obj.alpha\r\n  const toX = toPos.x\r\n  const toY = toPos.y\r\n  const toAlpha = toPos.alpha\r\n  const endTime = Date.now() + length\r\n  const updateFunc = () => {\r\n    const time = Date.now()\r\n    const timeLeft = endTime - time > 0 ? endTime - time : 0\r\n    const ratio = 1 - Math.sqrt(1 - timeLeft / length)\r\n    const x = toX - ratio * (toX - fromX)\r\n    const y = toY - ratio * (toY - fromY)\r\n    const alpha = toAlpha - ratio * (toAlpha - fromAlpha)\r\n    obj.x = x\r\n    obj.y = y\r\n    obj.alpha = alpha\r\n    if (timeLeft) requestAnimationFrame(updateFunc)\r\n    else if (cb) return cb()\r\n  }\r\n  requestAnimationFrame(updateFunc)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/animate.js","import {\r\n  COLOR_BG_ARR,\r\n  COLOR_BTN_NORMAL_ARR,\r\n  COLOR_BTN_ACTIVE_ARR,\r\n  COLOR_BTN_FLASH_ARR,\r\n} from './consts'\r\nimport { animateObj } from './animate'\r\n\r\nconst FLASH_ANIMATION_LENGTH = 1000\r\n\r\nexport const createButton = (stage, w, h, margin, cb) => {\r\n  const container = stage.createContainer()\r\n  container.append(stage.createRect(-margin, -margin, w + margin * 2, h + margin * 2).color(...COLOR_BTN_NORMAL_ARR).bind('click', cb || function() { /* empty */ }))\r\n  container.append(stage.createRect(0, 0, w, h).color(...COLOR_BG_ARR))\r\n  return container\r\n}\r\nexport const activateButton = (container) => {\r\n  container.index(0).color(...COLOR_BTN_ACTIVE_ARR)\r\n}\r\nexport const deactivateButton = (container) => {\r\n  container.index(0).color(...COLOR_BTN_NORMAL_ARR)\r\n}\r\nexport const flashButton = (container) => {\r\n  if (container.buttonFlashing) return\r\n  container.buttonFlashing = true\r\n  const btn = container.index(0).color(...COLOR_BTN_FLASH_ARR).setAlpha(0)\r\n  let curAlpha = 0\r\n  const flash = () => {\r\n    if (!container.buttonFlashing) return\r\n    curAlpha = 1 - curAlpha\r\n    animateObj(btn, {\r\n      x: btn.x,\r\n      y: btn.y,\r\n      alpha: curAlpha\r\n    }, FLASH_ANIMATION_LENGTH, flash)\r\n  }\r\n  flash()\r\n}\r\nexport const unflashButton = (container) => {\r\n  container.buttonFlashing = false\r\n  container.index(0).color(...COLOR_BTN_NORMAL_ARR)\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/buttons.js","export default {\r\n  tutorialSteps: [\r\n    [2, 2],\r\n    [2, 3],\r\n    [2, 1]\r\n  ],\r\n  title: '#01',\r\n  mapStr: `\r\n    --r--\r\n    -r-r-\r\n    -rrr-\r\n    -r-r-\r\n    --r--\r\n  `\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/levels/tutorial-1.js","export default {\r\n  tutorialSteps: [\r\n    [1, 2],\r\n    [3, 2],\r\n    [4, 1],\r\n    [0, 3],\r\n  ],\r\n  title: '#02',\r\n  mapStr: `\r\n    ----b\r\n    -r-pb\r\n    pr-rp\r\n    bp-r-\r\n    b----\r\n  `\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/levels/tutorial-2.js","export default {\r\n  tutorialSteps: [\r\n    [1, 3],\r\n    [3, 3],\r\n    [-1, 0],\r\n    [2, 1],\r\n    [2, 2]\r\n  ],\r\n  title: '#03',\r\n  mapStr: `\r\n    --r--\r\n    -r-r-\r\n    -y-p-\r\n    ggwbb\r\n    -g-b-\r\n  `\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/levels/tutorial-3.js","import {\r\n  R,\r\n  G,\r\n  B,\r\n} from './consts'\r\n\r\nconst D_PER_LEVEL = 80\r\nconst D_COLOR_COUNT = [0, 2, 3, 4]\r\nconst D_STEP_BATCH = [0, 4, 3, 0, 2]\r\n\r\nconst P_SYMMETRY_NONE = 0.1\r\nconst P_SYMMETRY_H = 0.3\r\nconst P_SYMMETRY_V = 0.5\r\nconst P_SYMMETRY_ROTATE = 0.7\r\nconst P_SYMMETRY_ALL = 0.9\r\nconst P_SYMMETRY_ALL_ROTATE = 1\r\n\r\nconst P_2_COLOR_D_MIN = D_PER_LEVEL * 2\r\nconst P_3_COLOR_D_MIN = D_PER_LEVEL * 4\r\nconst P_2_COLOR_D_INC = D_PER_LEVEL / 5\r\nconst P_3_COLOR_D_INC = D_PER_LEVEL / 10\r\n\r\nconst SYMMETRY_NONE = 0\r\nconst SYMMETRY_H = 1\r\nconst SYMMETRY_V = 2\r\nconst SYMMETRY_ROTATE = 3\r\nconst SYMMETRY_ALL = 4\r\nconst SYMMETRY_ALL_ROTATE = 5\r\n\r\nconst levelToDifficulty = (level) => {\r\n  return level * D_PER_LEVEL\r\n}\r\n\r\nexport const endless = ({level, timeUsed}) => {\r\n  const difficulty = levelToDifficulty(level)\r\n\r\n  // random utils\r\n  const seed = Math.floor(Math.random() * (1000000000))\r\n  let curSeed = seed\r\n  let curRandMul = 1\r\n  const getRandom = (max) => {\r\n    let prevRandMul = curRandMul\r\n    curRandMul *= max\r\n    if (curRandMul > 1000000000) {\r\n      curSeed = curSeed * 137 % 1000000000\r\n      prevRandMul = curRandMul = 1\r\n    }\r\n    return Math.floor(curSeed / prevRandMul) % max\r\n  }\r\n\r\n  // init map\r\n  const colorMap = []\r\n  for(let j = 0; j < 5; j++) {\r\n    const line = []\r\n    for(let i = 0; i < 5; i++) {\r\n      line.push(0)\r\n    }\r\n    colorMap.push(line)\r\n  }\r\n  const opCountMap = []\r\n  for(let j = 0; j < 5; j++) {\r\n    const line = []\r\n    for(let i = 0; i < 5; i++) {\r\n      line.push(0)\r\n    }\r\n    opCountMap.push(line)\r\n  }\r\n\r\n  // generate symmetry type\r\n  const symmetryRand = getRandom(10) / 10\r\n  let symmetryType = 0\r\n  if (symmetryRand < P_SYMMETRY_NONE) {\r\n    symmetryType = SYMMETRY_NONE\r\n  } else if (symmetryRand < P_SYMMETRY_H) {\r\n    symmetryType = SYMMETRY_H\r\n  } else if (symmetryRand < P_SYMMETRY_V) {\r\n    symmetryType = SYMMETRY_V\r\n  } else if (symmetryRand < P_SYMMETRY_ROTATE) {\r\n    symmetryType = SYMMETRY_ROTATE\r\n  } else if (symmetryRand < P_SYMMETRY_ALL) {\r\n    symmetryType = SYMMETRY_ALL\r\n  } else if (symmetryRand < P_SYMMETRY_ALL_ROTATE) {\r\n    symmetryType = SYMMETRY_ALL_ROTATE\r\n  }\r\n\r\n  // generate color type\r\n  const colorKey = [R, G, B][getRandom(3)]\r\n  const colorRand = getRandom(10) / 10\r\n  let colors = [R, G, B]\r\n  let colorType = 1\r\n  const pColor2 = (difficulty - P_2_COLOR_D_MIN) * P_2_COLOR_D_INC\r\n  const pColor3 = (difficulty - P_3_COLOR_D_MIN) * P_3_COLOR_D_INC\r\n  if (colorRand < pColor3) {\r\n    colors = [R, G, B]\r\n    colorType = 3\r\n  } else if (colorRand < pColor2) {\r\n    colors.splice(colors.indexOf(colorKey), 1)\r\n    colorType = 2\r\n  } else {\r\n    colors = [colorKey]\r\n    colorType = 1\r\n  }\r\n\r\n  // generate each step\r\n  let currentD = 0\r\n  // eslint-disable-next-line complexity\r\n  const nextStep = () => {\r\n    const stepColor = colors[getRandom(colorType)]\r\n    const stepM = getRandom(5)\r\n    const stepN = getRandom(5)\r\n\r\n    // init maps\r\n    const signMap = []\r\n    for(let j = 0; j < 5; j++) {\r\n      const line = []\r\n      for(let i = 0; i < 5; i++) {\r\n        line.push(0)\r\n      }\r\n      signMap.push(line)\r\n    }\r\n    const weightMap = []\r\n    for(let j = 0; j < 5; j++) {\r\n      const line = []\r\n      for(let i = 0; i < 5; i++) {\r\n        line.push(0)\r\n      }\r\n      weightMap.push(line)\r\n    }\r\n\r\n    // construct sign map\r\n    let stepCount = 0\r\n    const setSignMap = (m, n) => {\r\n      if (signMap[n][m]) return\r\n      stepCount++\r\n      signMap[n][m] = 1\r\n    }\r\n    setSignMap(stepM, stepN)\r\n    if (symmetryType === SYMMETRY_H) {\r\n      setSignMap(4 - stepM, stepN)\r\n    } else if (symmetryType === SYMMETRY_V) {\r\n      setSignMap(stepM, 4 - stepN)\r\n    } else if (symmetryType === SYMMETRY_ROTATE) {\r\n      setSignMap(4 - stepM, 4 - stepN)\r\n    } else if (symmetryType === SYMMETRY_ALL) {\r\n      setSignMap(4 - stepM, stepN)\r\n      setSignMap(stepM, 4 - stepN)\r\n      setSignMap(4 - stepM, 4 - stepN)\r\n    } else if (symmetryType === SYMMETRY_ALL_ROTATE) {\r\n      setSignMap(4 - stepN, stepM)\r\n      setSignMap(stepN, 4 - stepM)\r\n      setSignMap(4 - stepM, 4 - stepN)\r\n    }\r\n\r\n    // extend weight map\r\n    let stepD = 0\r\n    for(let j = 0; j < 5; j++) {\r\n      for(let i = 0; i < 5; i++) {\r\n        if (signMap[j - 1] && signMap[j - 1][i]) stepD += (++weightMap[j][i]) + opCountMap[j][i]\r\n        if (signMap[j + 1] && signMap[j + 1][i]) stepD += (++weightMap[j][i]) + opCountMap[j][i]\r\n        if (signMap[j][i - 1]) stepD += (++weightMap[j][i]) + opCountMap[j][i]\r\n        if (signMap[j][i + 1]) stepD += (++weightMap[j][i]) + opCountMap[j][i]\r\n        if (signMap[j][i]) stepD += (++weightMap[j][i]) + opCountMap[j][i]\r\n      }\r\n    }\r\n\r\n    // check and write to map\r\n    stepD *= D_COLOR_COUNT[colorType] * D_STEP_BATCH[stepCount]\r\n    if (stepD + currentD <= difficulty || currentD === 0) {\r\n      console.info([stepM, stepN, stepColor]) // FIXME step is shown in console\r\n      for(let j = 0; j < 5; j++) {\r\n        for(let i = 0; i < 5; i++) {\r\n          if (weightMap[j][i] % 2) {\r\n            colorMap[j][i] ^= stepColor\r\n          }\r\n          opCountMap[j][i] += weightMap[j][i]\r\n        }\r\n      }\r\n    } else {\r\n      stepD = 0\r\n    }\r\n    return stepD\r\n  }\r\n  while (currentD < difficulty) {\r\n    const stepD = nextStep()\r\n    if (!stepD) break\r\n    currentD += stepD\r\n  }\r\n\r\n  const levelObj = {\r\n    timeUsed,\r\n    title: '#' + (level < 10 ? '0' + level : level),\r\n    seed,\r\n    difficulty: currentD,\r\n    map: colorMap\r\n  }\r\n  return levelObj\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/generator.js"],"sourceRoot":""}